[⚠️ Suspicious Content] <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>HatYork - Sistema de Control de Inventarios</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    nav a { display: block; margin-bottom: 5px; color: #0077cc; text-decoration: none; }
    h1, h2 { color: #222; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: center; }
    th { background: #f0f0f0; }
    input, select { width: 100%; padding: 5px; box-sizing: border-box; }
    button { margin-top: 10px; padding: 8px 12px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>HatYork - Sistema de Control de Inventarios</h1>
  <nav>
    <a href="#introduccion">Introducción</a>
    <a href="#operaciones">Operaciones Contables</a>
    <a href="#peps">Inventario PEPS</a>
    <a href="#stock">Stock de Mercancía</a>
    <a href="#utilidad">Utilidad Bruta</a>
    <a href="#conclusion">Conclusión</a>
  </nav>

  <section id="peps">
    <h2>Inventario PEPS</h2>
    <table id="tablaPEPS">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Movimiento</th>
          <th>Descripción</th>
          <th>Cantidad</th>
          <th>Precio Unitario</th>
          <th>Total</th>
          <th>Saldo</th>
          <th>Existencia</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="date"></td>
          <td>
            <select class="movimiento">
              <option value="Inventario inicial">Inventario inicial</option>
              <option value="Compra">Compra</option>
              <option value="Devolución sobre compra">Devolución sobre compra</option>
              <option value="Venta">Venta</option>
              <option value="Devolución sobre venta">Devolución sobre venta</option>
            </select>
          </td>
          <td><input type="text" class="descripcion"></td>
          <td><input type="number" class="cantidad"></td>
          <td><input type="number" class="precio"></td>
          <td><input type="number" class="total" readonly></td>
          <td><input type="text" class="saldo" readonly></td>
          <td><input type="number" class="existencia" readonly></td>
        </tr>
      </tbody>
    </table>
    <button onclick="agregarFilaPEPS()">+ Añadir fila</button>
  </section>

  <script>
    function agregarFilaPEPS() {
      const tbody = document.querySelector("#tablaPEPS tbody");
      const fila = document.createElement("tr");
      fila.innerHTML = `
        <td><input type="date"></td>
        <td>
          <select class="movimiento">
            <option value="Inventario inicial">Inventario inicial</option>
            <option value="Compra">Compra</option>
            <option value="Devolución sobre compra">Devolución sobre compra</option>
            <option value="Venta">Venta</option>
            <option value="Devolución sobre venta">Devolución sobre venta</option>
          </select>
        </td>
        <td><input type="text" class="descripcion"></td>
        <td><input type="number" class="cantidad"></td>
        <td><input type="number" class="precio"></td>
        <td><input type="number" class="total" readonly></td>
        <td><input type="text" class="saldo" readonly></td>
        <td><input type="number" class="existencia" readonly></td>
      `;
      tbody.appendChild(fila);
      aplicarCalculos();
    }

    function aplicarCalculos() {
      const filas = document.querySelectorAll("#tablaPEPS tbody tr");
      let existencia = 0;
      let saldoAcumulado = 0;

      filas.forEach((fila, index) => {
        const cantidadInput = fila.querySelector(".cantidad");
        const precioInput = fila.querySelector(".precio");
        const totalInput = fila.querySelector(".total");
        const saldoInput = fila.querySelector(".saldo");
        const existenciaInput = fila.querySelector(".existencia");
        const movimiento = fila.querySelector(".movimiento");

        function actualizar() {
          const cantidad = parseFloat(cantidadInput.value) || 0;
          const precio = parseFloat(precioInput.value) || 0;
          const total = cantidad * precio;
          totalInput.value = total.toFixed(2);

          if (["Inventario inicial", "Compra", "Devolución sobre venta"].includes(movimiento.value)) {
            existencia += cantidad;
            saldoAcumulado += total;
            saldoInput.value = `${saldoAcumulado.toFixed(2)} - ${existencia}`;
          } else if (["Venta", "Devolución sobre compra"].includes(movimiento.value)) {
            existencia -= cantidad;
            saldoAcumulado -= total;
          }

          existenciaInput.value = existencia;
        }

        cantidadInput.addEventListener("input", actualizar);
        precioInput.addEventListener("input", actualizar);
        movimiento.addEventListener("change", actualizar);
      });
    }

    aplicarCalculos();
  </script>
</body>
</html>

